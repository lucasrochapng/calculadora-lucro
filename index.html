<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Lucro</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="icon" href="img/capivara.png" type="image/x-icon">
    
</head>
<body>
    
    
    <form id="calculoForm">

        <h1>SIMULADOR DE LUCRO KAKELE</h1>

        <div id="box">
            <h3>Oferta de Compra</h3>
            <label for="unidadesCompra">Unidades:</label>
            <input type="number" id="unidadesCompra" placeholder="Qtd. de itens para comprar" required>
        
            <label for="precoCompra">Moedas por Unidade:</label>
            <input type="number" id="precoCompra" placeholder="Preço por cada unidade do item" required>
        </div>

        <br>

        <div id="box">
            <h3>Oferta de Venda</h3>
            <label for="unidadesVenda">Unidades:</label>
        
            <input type="number" id="unidadesVenda" placeholder="Qtd. de itens para vender" required>
            <label for="precoVenda">Moedas por Unidade:</label>
            <input type="number" id="precoVenda" placeholder="Preço por cada unidade do item" required>
        </div>

        <br>

        <div id="box">
            <h3>Preço do item no NPC</h3>
            <label for="valorUnitario">Moedas por Unidade:</label>
            <input type="number" id="valorUnitario" placeholder="Preço que os NPCs pagam pelo item" required>
        </div>      
        
        <br>
        <button type="button" onclick="calcularLucro()">CALCULAR LUCRO</button>
        <br>

        <div id="resultado"></div>

    </form>

    <!-- <div id="resultado"></div> -->
    
    <script>

        function validarCampos() {
            let campos = document.querySelectorAll('input[required]');
            for (let i = 0; i < campos.length; i++) {
                if (!campos[i].value) {
                    alert('Por favor, preencha todos os campos.');
                        return false;
                    }
                }
                return true;
        }

        // Função para calcular o lucro líquido com base nas unidades compradas, preço de compra,
        // valor unitário, unidades vendidas e preço de venda
        function calcularLucro(unidadesCompra, precoCompra, valorUnitario, unidadesVenda, precoVenda) {

            // Verificar se todos os campos estão preenchidos
            if (!validarCampos()) {
                return;
            }

            // Calcula o investimento total
            let investimento = unidadesCompra * precoCompra;

            // Calcula a taxa de imposto sobre o investimento
            let taxaDeImpostoCompra = 0;

            // Verifica se o preço de compra é menor que 10 vezes o valor unitário
            if (precoCompra < valorUnitario * 10) {
                // Se sim, subtrai 1% do investimento total e atribui à taxa de imposto
                taxaDeImpostoCompra = investimento * 0.01;
                investimento = investimento + taxaDeImpostoCompra;
            } else {
                // Se não, subtrai 10% do investimento total e atribui à taxa de imposto
                taxaDeImpostoCompra = investimento * 0.10;
                investimento = investimento + taxaDeImpostoCompra;
            }

            // Calcula o valor total da venda
            let valorTotalVenda = unidadesVenda * precoVenda;

            // Calcula a taxa de imposto sobre a venda
            let taxaDeImpostoVenda = 0;

            // Verifica se o preço de venda é menor que 10 vezes o valor unitário
            if (precoVenda < valorUnitario * 10) {
                // Se sim, subtrai 1% do valor total da venda e atribui à taxa de imposto
                taxaDeImpostoVenda = valorTotalVenda * 0.01;
            } else {
                // Se não, subtrai 10% do valor total da venda e atribui à taxa de imposto
                taxaDeImpostoVenda = valorTotalVenda * 0.10;
            }

            // Calcula o lucro líquido (valor total da venda - investimento - taxa de imposto sobre a compra - taxa de imposto sobre a venda)
            let lucroLiquido = valorTotalVenda - investimento - taxaDeImpostoVenda;

            // Retorna o lucro líquido
            return lucroLiquido;

            

        }
    </script>

    <script>
        // Chamar a função de cálculo do lucro após o carregamento completo do documento
        document.addEventListener("DOMContentLoaded", function() {
            // Obter o botão de calcular
            const btnCalcular = document.querySelector('button');

            // Adicionar um ouvinte de evento ao botão
            btnCalcular.addEventListener('click', function() {
                // Obter os valores dos campos de entrada
                let unidadesCompra = parseFloat(document.getElementById("unidadesCompra").value);
                let precoCompra = parseFloat(document.getElementById("precoCompra").value);
                let valorUnitario = parseFloat(document.getElementById("valorUnitario").value);
                let unidadesVenda = parseFloat(document.getElementById("unidadesVenda").value);
                let precoVenda = parseFloat(document.getElementById("precoVenda").value);

                // Calcular o lucro usando a função fornecida
                let lucroResultado = calcularLucro(unidadesCompra, precoCompra, valorUnitario, unidadesVenda, precoVenda);

                // Exibir o resultado na página
                document.getElementById("resultado").innerText = "Seu lucro será de " + lucroResultado.toFixed(0) + " coins";
            });
        });
    </script>
</body>
</html>
